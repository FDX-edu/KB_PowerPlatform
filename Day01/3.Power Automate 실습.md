# 3. Power Automate 실습

네이버 API를 활용하여 뉴스 기사를 수집하고 요약하여 Teams 메시지로 전달하는 자동화를 만들어 봅시다.


## 네이버 API 설정

네이버 API를 호출하기 위해선 [네이버 개발자 센터](https://developers.naver.com/)에 등록이 필요합니다.  
애플리케이션을 생성하면 Client id와 Client Secret을 발급받을 수 있습니다.  


## Power Automate

<img width="800" src="https://github.com/user-attachments/assets/4be085b7-48aa-43c6-bcbd-9ca5e8673de4" />

[Power Automate](make.powerautomate.com)에 접속합니다.


### 흐름 생성

(이미지)

만들기 - 인스턴트 클라우드 흐름
트리거 방법 선택: 수동으로 흐름 트리거

(이미지)

흐름 생성 완료 시 디자이너에 자동으로 '수동으로 흐름 트리거'가 추가됩니다.


### HTTP 요청 및 

(이미지)

HTTP 작업을 추가하여 네이버 API를 호출합니다.  
입력할 값들(URI, Method, Headers, Queries 등)에 대해서는 네이버 개발자 센터의 [공식 문서](https://developers.naver.com/docs/serviceapi/search/news/news.md)를 참고합니다.  

(테스트 후 결과)

HTTP 요청에 대한 응답은 json 형태의 데이터로 전달받을 수 있습니다.


### 데이터 추출

(이미지)

**변수 초기화**를 추가하여 배열을 생성합니다. 이 배열은 API 응답의 '기사제목 - 기사요약내용' 형식으로 데이터를 저장할 배열입니다.
이제 10개의 뉴스 기사에 대해, 응답의 뉴스들의 데이터를 추출하여 배열에 저장합니다.


(이미지)
```
body('HTTP')['items']
```

**반복 적용**의 매개 변수에 HTTP 커넥터의 출력 중 items 항목을 넣어, 뉴스 기사를 순회할 수 있도록 합니다.

(이미지)

```
concat(items('반복_적용')['title'], ' - ', items('반복_적용')['description'])
```

**반복 적용**의 내부에 **작성**과 **배열 변수에 추가**를 추가하여 배열에 위와 같이 입력합니다.


(이미지)
**조인**을 추가하여 배열의 모든 데이터를 하나로 만듭니다.


### AI Builder 사용

(이미지)

AI Builder를 생성합니다.

지침에 '/'를 입력하여 텍스트 콘텐츠를 추가하고, 일반적인 자연어로 된 지침을 입력합니다.


(이미지)
```
아래는 여러 뉴스 기사들의 제목과 내용입니다.
전체 내용을 요약하고, 핵심 내용을 기반으로 의미 있는 분석 또는 시사점을 한 문단으로 제시하세요
```

위와 같은 지침을 입력하고 저장합니다.

(이미지)
**프롬프트 실행**을 추가하여 생성한 AI Builder를 호출합니다.


### Teams 호출

(이미지)

**채팅 또는 채널에서 메시지 게시**를 추가하여 위와 같이 설정합니다.

(이미지)

저장 후 테스트합니다.

